{% extends 'base.html' %}
{% load static %}

{% block title %}Write a Review - {{ product.name }}{% endblock %}

{% block extra_css %}

{% endblock %}
    
    {% block content %}
    <section class="review-form-section container">
        <h1>Write a Review</h1>
        
        <div class="product-preview">
            {% if product.image %}
            <img src="{{ product.image.url }}" alt="{{ product.name }}">
            {% endif %}
            <div>
                <h3>{{ product.name }}</h3>
                <p>${{ product.price }}{% if product.unit %} / {{ product.get_unit_display }}{% endif %}</p>
            </div>
        </div>
    
        <form method="post" novalidate id="reviewForm">
            {% csrf_token %}
            
            <div class="form-group">
                <label for="{{ form.name.id_for_label }}">Your Name *</label>
                {{ form.name }}
                {% if form.name.errors %}
                    <ul class="errorlist">
                        {% for error in form.name.errors %}
                        <li>{{ error }}</li>
                        {% endfor %}
                    </ul>
                {% endif %}
            </div>
    
            <div class="form-group">
                <label for="{{ form.email.id_for_label }}">Your Email *</label>
                {{ form.email }}
                {% if form.email.errors %}
                    <ul class="errorlist">
                        {% for error in form.email.errors %}
                        <li>{{ error }}</li>
                        {% endfor %}
                    </ul>
                {% endif %}
            </div>
    
            <div class="form-group">
                <label>Rating *</label>
                <div class="rating-input">
                    <input type="radio" name="rating" value="5" id="star5" {% if form.rating.value == 5 %}checked{% endif %}>
                    <label for="star5"><i class="fas fa-star"></i></label>
                    <input type="radio" name="rating" value="4" id="star4" {% if form.rating.value == 4 %}checked{% endif %}>
                    <label for="star4"><i class="fas fa-star"></i></label>
                    <input type="radio" name="rating" value="3" id="star3" {% if form.rating.value == 3 %}checked{% endif %}>
                    <label for="star3"><i class="fas fa-star"></i></label>
                    <input type="radio" name="rating" value="2" id="star2" {% if form.rating.value == 2 %}checked{% endif %}>
                    <label for="star2"><i class="fas fa-star"></i></label>
                    <input type="radio" name="rating" value="1" id="star1" {% if form.rating.value == 1 %}checked{% endif %}>
                    <label for="star1"><i class="fas fa-star"></i></label>
                </div>
                {% if form.rating.errors %}
                    <ul class="errorlist">
                        {% for error in form.rating.errors %}
                        <li>{{ error }}</li>
                        {% endfor %}
                    </ul>
                {% endif %}
            </div>
    
            <div class="form-group">
                <label for="{{ form.title.id_for_label }}">Review Title *</label>
                {{ form.title }}
                {% if form.title.errors %}
                    <ul class="errorlist">
                        {% for error in form.title.errors %}
                        <li>{{ error }}</li>
                        {% endfor %}
                    </ul>
                {% endif %}
            </div>
    
            <div class="form-group">
                <label for="{{ form.comment.id_for_label }}">Your Review *</label>
                {{ form.comment }}
                {% if form.comment.errors %}
                    <ul class="errorlist">
                        {% for error in form.comment.errors %}
                        <li>{{ error }}</li>
                        {% endfor %}
                    </ul>
                {% endif %}
            </div>
    
            <button type="submit" class="btn btn-primary">Submit Review</button>
            <a href="{% url 'products:product_detail' product.slug %}" class="btn btn-secondary">Cancel</a>
        </form>
    </section>
    
    {% endblock %}